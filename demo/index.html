<!DOCTYPE html>
<html>
<head>
    <title>Easyflux in action</title>
</head>
<body>

    <!-- Main app html -->
    <div id="container"></div>

    <!-- React -->
    <script src="http://fb.me/react-0.13.0.min.js"></script>
    <script src="../dist/easyflux-0.0.1.js"></script>

    <!-- Demo code -->
    <script>

        var App,
            StateComponent,
            events = Easyflux([
                'hide'
            ]);

        // Main app class
        App = React.createClass({
            displayName: 'App',

            toggleComponentState: function() {
                // Trigger an event
                this.refs.stateComponent.trigger('toggle');
            },

            render: function() {
                return React.DOM.div({}, [
                    React.DOM.h2({}, 'Easyflux in action'),
                    React.DOM.p({}, 'Click the button to toggle state of component'),
                    React.DOM.button({ onClick: this.toggleComponentState }, 'Toggle component state'),
                    React.createElement(StateComponent, {ref: 'stateComponent'})
                ])
            }
        });

        // Our 'custom' component
        StateComponent = React.createClass({
            displayName: 'StateComponent',

            // Include the mixin to have more use-case friendly methods: listenTo, trigger
            mixins: [Easyflux.Mixin],

            getInitialState: function() {
                return {
                    status: false
                }
            },

            // Define component-wide events
            events: Easyflux(['toggle']),

            componentWillMount: function() {

                // Listen to an event
                this.listenTo('toggle', function() {
                    this.setState({
                        status: !this.state.status
                    })
                }, this);
            },

            render: function() {
                return React.DOM.div({}, 'Current state is: ' + this.state.status)
            }
        });

        React.render(React.createElement(App), document.getElementById('container'));
    </script>
</body>
</html>